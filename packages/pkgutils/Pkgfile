# Description: CRUX package management utilities
# URL: https://github.com/zeppe-lin/pkgutils
# Maintainer: LFS Infrastructure
# Depends on:

name=pkgutils
version=5.40.9
release=1
source=(https://github.com/zeppe-lin/pkgutils/archive/refs/tags/${version}.tar.gz)

build() {
    cd ${name}-${version}

    # Apply aggressive optimizations
    export CXXFLAGS="${CXXFLAGS} -O3 -march=native -mtune=native -flto=$(nproc)"
    export LDFLAGS="${LDFLAGS} -flto=$(nproc)"

    make -j$(nproc)
    make DESTDIR=$PKG PREFIX=/usr install
}
