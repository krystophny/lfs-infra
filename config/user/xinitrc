#!/bin/sh

# Log errors to file
exec > ~/.xsession-errors 2>&1

# Source system xinitrc scripts
if [ -d /etc/X11/xinit/xinitrc.d ]; then
    for f in /etc/X11/xinit/xinitrc.d/?*.sh; do
        [ -x "$f" ] && . "$f"
    done
fi

# Start D-Bus session daemon
eval $(dbus-launch --sh-syntax)
export DBUS_SESSION_BUS_ADDRESS DBUS_SESSION_BUS_PID

# Start XFCE session directly
exec xfce4-session
